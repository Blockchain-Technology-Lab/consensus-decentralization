<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Mappings - Blockchain Pooling Analysis - Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Mappings";
        var mkdocs_page_input_path = "mappings.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Blockchain Pooling Analysis - Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setup/">How to use</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../data/">Data Collection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../parsers/">Parsers</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">Mappings</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#pool-information">Pool Information</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#pool-ownership">Pool Ownership</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../metrics/">Metrics</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../output/">Output</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Blockchain Pooling Analysis - Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Mappings</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="mappings">Mappings</h1>
<p>A mapping obtains the parsed data (from <code>output/&lt;project_name&gt;/parsed_data.json</code>) and outputs a <code>csv</code> file that maps
blocks to entities, structured as follows:</p>
<pre><code>Entity,Resources
&lt;name of entity&gt;,&lt;(int) number of blocks&gt;
</code></pre>
<p>The name of the <code>csv</code> file is the timeframe, over which the mapping was executed (e.g., <code>2021-04.csv</code>). The file is stored in the
project's output directory (<code>output/&lt;project_name&gt;/</code>).</p>
<p>The logic of the mapping depends on the type of clustering we want to achieve. So, different mappings will output
different results, even if applied on the same data. An exception to this is the "no-cluster" mapping, which maps blocks to 
coinbase addresses, so it doesn't perform any extra processing on the raw data.</p>
<h2 id="pool-information">Pool Information</h2>
<p>To assist the mapping process, the directory <code>helpers/pool_information/</code> contains files named <code>&lt;project_name&gt;.json</code>, with
relevant pool information, structured as follows:</p>
<pre><code>{
  &quot;clusters&quot;: {
    &quot;&lt;cluster name&gt;&quot;: [
      {&quot;name&quot;: &quot;&lt;pool name&gt;&quot;, &quot;from&quot;: &quot;&lt;from&gt;&quot;, &quot;to&quot;: &quot;&lt;to&gt;&quot;, &quot;source&quot;: &quot;&lt;source of information&gt;&quot;}
    ]
  },
  &quot;coinbase_tags&quot;: {
    &quot;&lt;pool tag&gt;&quot;: {
      &quot;name&quot;: &quot;&lt;pool name&gt;&quot;,
      &quot;link&quot;: &quot;&lt;pool website&gt;&quot;
    }
  },
  &quot;pool_addresses&quot;: {
    &quot;&lt;address&gt;&quot;: {&quot;name&quot;: &quot;&lt;pool name&gt;&quot;, &quot;from&quot;: &quot;&lt;from&gt;&quot;, &quot;to&quot;: &quot;&lt;to&gt;&quot;, &quot;source&quot;: &quot;&lt;source of information&gt;&quot;},
  }
}
</code></pre>
<p>In this file:</p>
<ul>
<li><code>clusters</code> refers to pools that share infrastructure:</li>
<li>for each pool in a cluster, the following values should be defined:</li>
<li><code>&lt;from&gt;</code> sets the beginning of the control of the pool by the cluster; the first
    day of the timeframe is chosen; for example, if <code>2022</code>, then the beginning is set
    to <code>2022-01-01</code>); if <code>&lt;from&gt;</code> is empty, then the control existed since the
    pool's inception.</li>
<li><code>&lt;to&gt;</code> sets the end of the control of the pool by the cluster; the end is
    exclusive, i.e., it defines the beginning of the control transition; for
    example, if <code>2022</code>, the end of the control is <code>31-12-2021</code>
    if <code>&lt;to&gt;</code> is empty, then the control is still active.</li>
<li><code>&lt;source of information&gt;</code> should be either (i) comma-separated keywords or (ii) a url with the clustering information; this information should be publicly-available and reproducible (for example, a link to a community or company, with information that cannot be verified independently, is not acceptable);<ul>
<li>keywords: for Cardano, <code>homepage</code> can be used for pools that define the
  same <code>homepage</code> in their metadata json file (published on0chain)</li>
</ul>
</li>
<li><code>&lt;pool tag&gt;</code> is the tag that a pool inserts in a block's coinbase parameter, in order to claim a block as being mined by the pool; in projects that do not rely on the coinbase parameter (e.g., Cardano, Tezos) the tag is just the name of the pool (Tezos) or its ticker (Cardano).</li>
<li><code>pool_addresses</code> define control of an address by a pool; the structure is the same as <code>clusters</code>.</li>
</ul>
<h4 id="pool-ownership">Pool Ownership</h4>
<p>The file <code>helpers/legal_links.json</code> defines legal links between pools and companies, based on off-chain information.
For example, it defines ownership information of a pool by a company.
The structure of the file is as follows:</p>
<pre><code>{
  &quot;&lt;parent company&gt;&quot;: [
      {&quot;name&quot;: &quot;&lt;pool name&gt;&quot;, &quot;from&quot;: &quot;&lt;start date&gt;&quot;, &quot;to&quot;: &quot;&lt;end date&gt;&quot;, &quot;source&quot;: &quot;&lt;source of information&gt;&quot;}
  ]
}
</code></pre>
<p>The values for each entry are the same as <code>clusters</code> in the above pool information.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../parsers/" class="btn btn-neutral float-left" title="Parsers"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../metrics/" class="btn btn-neutral float-right" title="Metrics">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../parsers/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../metrics/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
