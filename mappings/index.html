<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Mappings - Consensus Blockchain Decentralization - Docs</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Mappings";
        var mkdocs_page_input_path = "mappings.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Consensus Blockchain Decentralization - Docs
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../setup/">How to use</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../data/">Data Collection</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../parsers/">Parsers</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Mappings</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#mapping-information">Mapping Information</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#identifiers">Identifiers</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#clusters">Clusters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#addresses">Addresses</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#legal-links">Legal links</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#special-addresses">Special addresses</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mapping-process-implementation">Mapping process implementation</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../aggregator/">Aggregator</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../metrics/">Metrics</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../contribute/">How to contribute</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Consensus Blockchain Decentralization - Docs</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Mappings</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="mappings">Mappings</h1>
<p>A mapping is responsible for linking blocks to the entities that created them. While the parsed data contains
information about the addresses that received rewards for producing some block or identifiers that are related to them,
it does not contain information about the entities that control these addresses, which is where the mapping comes in.</p>
<p>The mapping takes as input the parsed data and outputs a file (<code>output/&lt;project_name&gt;/mapped_data.json</code>), which is
structured as follows:</p>
<pre><code>[
    {
        &quot;number&quot;: &quot;&lt;block's number&gt;&quot;,
        &quot;timestamp&quot;: &quot;&lt;block's timestamp of the form: yyyy-mm-dd hh:mm:ss UTC&gt;&quot;,
        &quot;reward_addresses&quot;: &quot;&lt;address1&gt;,&lt;address2&gt;&quot;
        &quot;creator&quot;: &lt;entity that created the block&gt;,
        &quot;mapping_method&quot;: &lt;method used to map the block to its creator&gt;
    }
]
</code></pre>
<h2 id="mapping-information">Mapping Information</h2>
<p>To assist the mapping process, the directory <code>mapping_information/</code> contains
mapping information about the supported projects.</p>
<p>There exist three subdirectories and two additional files. In each subdirectory there exists a file for
the corresponding ledger data, if such data exists.</p>
<h4 id="identifiers">Identifiers</h4>
<p>The files under <code>identifiers</code> define information about block creators. Each key
corresponds to a tag or ticker, by which the pool is identifiable in its
produced blocks. The value for each key is a dictionary of pool-related
information, specifically its name, a URL to its homepage, etc. Each file's
structure is as follows:</p>
<pre><code>{
  &quot;P1&quot;: {
      &quot;name&quot;: &quot;Pool P1&quot;,
      &quot;homepage&quot;: &quot;example.com/p1&quot;
  },
  &quot;--P2--&quot;: {
      &quot;name&quot;: &quot;Pool P2&quot;,
      &quot;homepage&quot;: &quot;example.com/p2&quot;
  }
}
</code></pre>
<h4 id="clusters">Clusters</h4>
<p>The files under <code>clusters</code> define information about pool clusters. Each key corresponds to a
unique pool id (e.g. pool hash in Cardano). The value for each key is a dictionary including
the cluster to which the pool belongs, the pool's name, and the source of information about
the cluster. When the source is set to "homepage", it means that the pool was clustered together
with some other pool(s) because they share the same webpage.
Each file's structure is as follows:</p>
<pre><code>{
  &quot;pool id 1&quot;: {
      &quot;cluster&quot;: &quot;cluster A&quot;,
      &quot;pool&quot;: &quot;Pool P1&quot;,
      &quot;source&quot;: &quot;homepage&quot;
  },
  &quot;pool id 2&quot;: {
      &quot;cluster&quot;: &quot;cluster B&quot;,
      &quot;pool&quot;: &quot;--P2--&quot;,
      &quot;source&quot;: &quot;example_url.com&quot;
  }
}
</code></pre>
<h4 id="addresses">Addresses</h4>
<p>The files under <code>addresses</code> define ownership information about addresses. As with
clusters, for each address the pool ownership information defines the pool's
name and a public source of information about the ownership.  Each file's
structure is as follows:</p>
<pre><code>{
  &quot;address1&quot;: {&quot;name&quot;: &quot;Pool P2&quot;, &quot;source&quot;: &quot;example.com&quot;},
}
</code></pre>
<h4 id="legal-links">Legal links</h4>
<p>The file <code>legal_links.json</code> defines legal links between pools and companies, based on off-chain information.
For example, it defines ownership information of a pool by a company.
The structure of the file is as follows:</p>
<pre><code>{
  &quot;&lt;parent company&gt;&quot;: [
      {&quot;name&quot;: &quot;&lt;pool name&gt;&quot;, &quot;from&quot;: &quot;&lt;start date&gt;&quot;, &quot;to&quot;: &quot;&lt;end date&gt;&quot;, &quot;source&quot;: &quot;&lt;source of information&gt;&quot;}
  ]
}
</code></pre>
<p>The values for each entry are the same as <code>clusters</code> in the above pool information.</p>
<h4 id="special-addresses">Special addresses</h4>
<p>The file <code>special_addresses.json</code> defines per-project information about addresses that are not related to some entity 
but are used for protocol-specific reasons (e.g. treasury address). The format of the file is the following:</p>
<pre><code>{
  &quot;Project A&quot;: [
      {&quot;address&quot;: &quot;A special address 1&quot;, &quot;source&quot;: &quot;some.public.source&quot;},
      {&quot;address&quot;: &quot;A special address 2&quot;, &quot;source&quot;: &quot;some.public.source&quot;}
  ],
  &quot;Project B&quot;: [
      {&quot;address&quot;: &quot;B special address&quot;, &quot;source&quot;: &quot;some.public.source&quot;}
  ]
}
</code></pre>
<h2 id="mapping-process-implementation">Mapping process implementation</h2>
<p>In our implementation, the mapping of a block uses the auxiliary information as follows.</p>
<p>First, it iterates over all known identifiers and compares each one with the identifiers of the block.
If a known identifier is a substring of the block's identifier, then a match is found.</p>
<p>If the first step fails, we compare the block's reward addresses with known pool addresses (including special 
addresses that exist for some blockchains) and again look for a match.</p>
<p>Following, we check if the entity that created the block belongs to a known pool cluster, and
if so, we map the block to the cluster.</p>
<p>In all cases, if there is a match, then:</p>
<ol>
<li>We map the block to the matched pool.</li>
<li>We associate all of the block's reward addresses (that is, the addresses that receive fees from the block) with 
the matched pool.</li>
<li>We record the mapping method that was used to obtain the mapping (<code>known_identifiers</code>, <code>known_addresses</code> or
<code>known_clusters</code>).</li>
</ol>
<p>If there is a match, we also parse information about pool ownership / legal links, in order to assign the
block to the top level entity, e.g., the pool's parent company. If a match is found this way, we update
the mapping method to <code>known_legal_links</code>.</p>
<p>If all mechanisms fail, then no match is found. In this case, we assign the reward addresses as the block's entity.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../parsers/" class="btn btn-neutral float-left" title="Parsers"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../aggregator/" class="btn btn-neutral float-right" title="Aggregator">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../parsers/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../aggregator/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
